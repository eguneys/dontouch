var Tetris=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){n(2);const r=n(3);t.exports=r.app},function(t,e,n){},function(t,e,n){"use strict";function r(t){let e=this.data={bounds:t.bounds,touches:{}};const n=Object.values({Space:"space",ArrowUp:"up",ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right"});this.update=t=>{n.forEach(n=>{(e[n]||0===e[n])&&(e[n]+=.01*t)})}}function i(t){const e=[],n=function(t){const e=s(t);return function(t){switch(t.code){case"Space":e("space");break;case"ArrowUp":e("up");break;case"ArrowDown":e("down");break;case"ArrowLeft":e("left");break;case"ArrowRight":e("right");break;default:return}t.preventDefault()}}(t),r=function(t){const e=c(t);return function(t){switch(t.code){case"Space":e("space");break;case"ArrowUp":e("up");break;case"ArrowDown":e("down");break;case"ArrowLeft":e("left");break;case"ArrowRight":e("right")}}}(t);return e.push(o(document,"keydown",n)),e.push(o(document,"keyup",r)),()=>{e.forEach(t=>t())}}function a(t){const e=[],n=function(t){const e=s(t),n=(n,r)=>{t.touches[r]=n,e(n)};return function(e){let r=u(e);for(let e=0;e<r.length;e++){let i=r[e];const a=l(t,i),o=i.identifier,s=h(t,a);switch(s){case"leftbottom":n("left",o);break;case"rightbottom":n("right",o);break;case"lefttop":case"righttop":n("up",o)}}}}(t),r=function(t){const e=c(t);function n(n){e(t.touches[n]),delete t.touches[n]}return function(t){let e=u(t);for(let t=0;t<e.length;t++){let r=e[t],i=r.identifier;n(i)}}}(t);return["touchstart"].forEach(t=>e.push(o(document,t,n))),["touchend"].forEach(t=>e.push(o(document,t,r))),()=>{e.forEach(t=>t())}}function o(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}function s(t){return e=>{t[e]||(t[e]=0)}}function c(t){return e=>{delete t[e]}}function l(t,e){let n=e.clientX,r=e.clientY;return{x:n-t.bounds.x,y:r-t.bounds.y}}function u(t){return t.changedTouches}function h(t,e){const{width:n,height:r}=t.bounds,i=.5*n,a=.5*r;return e.x<i?e.y>a?"leftbottom":"lefttop":e.y>a?"rightbottom":"righttop"}n.r(e);const f=void 0!==window.performance?window.performance:Date,d=()=>f.now(),p=window.requestAnimationFrame;function w(t,e=60){let n=!1,r=d(),i=0,a=1e3/e,o=0;this.start=()=>n?this:(n=!0,r=d(),i=p(s),this),this.stop=()=>(n=!1,0!=i&&p.cancel(i),i=0,this);const s=()=>{i=p(s);const e=d(),n=e-r;(o+=n)>=a&&(t(n),o=0),r=e}}function g(t){const e=document.createElement("canvas");t.append(e);const n=e.clientWidth,r=e.clientHeight;this.width=e.width=n,this.height=e.height=r,this.aspect=this.width/this.height,this.canvas=e,this.bounds=e.getBoundingClientRect()}function b({canvas:t,width:e,height:n,aspect:r}){const i=t.getContext("2d");this.raw=t=>t(i)}function v(t){const{width:e,height:n,aspect:r}=t;this.data={width:e,height:n,aspect:r};const i=new b(t);this.transform=({translate:t=[0,0],rotate:e=0,w:n,h:r=n},a)=>i.raw(i=>{i.save(),i.translate(t[0],t[1]);let o=.5*n,s=.5*r;i.translate(o,s),i.rotate(e),i.translate(-o,-s),a(i),i.restore()}),this.fill=(t,e="black")=>i.raw(n=>{n.fillStyle=e,n.fill(t)}),this.drawRect=(t,e,n,r,a="black")=>i.raw(i=>{i.fillStyle=a,i.fillRect(t,e,n,r)}),this.clear=(t="#ccc")=>i.raw(r=>{r.clearRect(0,0,e,n),r.fillStyle=t,r.fillRect(0,0,e,n)})}function m(t,e){e={name:"pool",warnLeak:400,...e};const n=(()=>{let t=0;return()=>t++})();let r=[],i=[];this.name=()=>e.name,this.alives=()=>r.length,this.total=()=>i.length+r.length,this.warnLeak=()=>e.warnLeak,this.toString=()=>`[${this.name()} alives: ${this.alives()} deads: ${i.length}]`,this.acquire=(e=(()=>{}))=>{let a;return this.total()>this.warnLeak()?(console.warn(`possible pool leak at ${this.name()}.`),null):(e(a=i.length>0?i.pop():t(n())),r.push(a),a)},this.acquireLimit=(t,e)=>{for(;this.alives()<e;)this.acquire(t)},this.release=t=>{let e=r.indexOf(t);e>-1&&i.push(r.splice(e,1)[0])},this.releaseAll=()=>{i=[...i,...r],r=[]},this.releaseIf=(t,e=(()=>{}))=>{let n=[],a=[];r.forEach(r=>{t(r)?(e(r),n.push(r)):a.push(r)}),r=a,i=[...n,...i]},this.each=t=>{r.forEach(t)},this.find=t=>r.find(t)}const y=Math.PI;function k(t,e=t){return{update(n){t=S(t,e,n)},target:(t=e)=>e=t,isSettled:(n=1)=>Math.abs(t-e)<n,value:(e=t)=>t=e}}function S(t,e,n=.2){return t+(e-t)*n}function A(t){t={autoStart:!0,...t};let{autoStart:e}=t,n=e,r=0;this.running=()=>n,this.value=(t=1)=>r*t,this.start=()=>{n=!0},this.stop=()=>{r=0,n=!1},this.update=t=>{if(n){r+=.01*t}}}function M(t,e){const{width:n,height:r}=t.data;let i,a=.2*r,o=.8*r,s=n/40,c=.6*r/40,l=function(t){const e=new Path2D;return e.moveTo(0,0),e.lineTo(.5*t,.8*t),e.lineTo(t,0),e}(40),u=new m(()=>new x(u)),h=new m(()=>new x(h)),f=(p=function(t){return.5*(1-Math.cos(t*Math.PI))},function(t,e,n){if(e=e||0,n=n||0,null==d){d=new Array(4096);for(var r=0;r<4096;r++)d[r]=Math.random()}t<0&&(t=-t),e<0&&(e=-e),n<0&&(n=-n);for(var i,a,o,s,c,l=Math.floor(t),u=Math.floor(e),h=Math.floor(n),f=t-l,w=e-u,g=n-h,b=0,v=.5,m=0;m<4;m++){var y=l+(u<<4)+(h<<8);i=p(f),a=p(w),o=d[4095&y],o+=i*(d[y+1&4095]-o),s=d[y+16&4095],o+=a*((s+=i*(d[y+16+1&4095]-s))-o),s=d[4095&(y+=256)],s+=i*(d[y+1&4095]-s),c=d[y+16&4095],s+=a*((c+=i*(d[y+16+1&4095]-c))-s),b+=(o+=p(g)*(s-o))*v,v*=.5,l<<=1,u<<=1,h<<=1,(f*=2)>=1&&(l++,f--),(w*=2)>=1&&(u++,w--),(g*=2)>=1&&(h++,g--)}return b});var d,p;let w,g,b=new A;this.init=()=>{i=5,w=!1,g=u,u.releaseAll(),h.releaseAll();for(let t=0;t<i;t++){let e=Math.floor(f(t,b.value())*c);(0===e||e>=c-2)&&(e=1),u.acquire(t=>t.init({y:a+40*e})),h.acquire(t=>t.init({y:a+40*e}))}},this.vanishSide=t=>{w=!1,g="left"===t?u:h};function v(){t.transform({translate:[-3,-1.5]},()=>{t.fill(l,"black")}),t.fill(l,"white")}this.update=t=>{b.update(t),(t=>{w||(w=!0,g.each(t=>{Math.random()<.5&&t.vanish()}));for(let t=g.alives();t<i;t++){let e=Math.floor(f(t,b.value())*c);(0===e||e>=c-2)&&(e=1),g.acquire(t=>t.init({y:a+40*e}))}})(),u.each(e=>e.update(t)),h.each(e=>e.update(t))},this.render=()=>{u.each(({data:e})=>{let{y:n,l:r}=e;t.transform({translate:[0-40*r,n],rotate:.5*-y,w:40,h:40},()=>{v()})}),h.each(({data:e})=>{let{y:r,l:i}=e;t.transform({translate:[n-40+40*i,r],rotate:.5*y,w:40,h:40},()=>{v()})});for(let e=0;e<s;e++)t.transform({translate:[40*e,a]},()=>{v()});for(let e=0;e<s;e++)t.transform({translate:[40*e,o-40],rotate:y,w:40,h:40},()=>{v()});t.drawRect(0,0,n,a),t.drawRect(0,o,n,o)}}function x(t){let e,n=new k(0);this.init=t=>{e=!1,n.value(1),n.target(0),t={y:0,l:1,...t},this.data=t},this.vanish=()=>{e=!0,n.target(1)};const r=()=>{e&&n.isSettled(.01)&&t.release(this)};this.update=t=>{r(),n.update(.01*t*.8),this.data.l=n.value()}}const E=(t,e,n)=>{let r=0;return i=>{(r+=i)>=e?(t(),r=0):n&&n(r/e)}};function L(t,e){this.init=()=>{};let n="left";const r=E(()=>{n="left"===n?"right":"left",e.spikes.vanishSide(n)},1e3);this.update=t=>{r(t)},this.render=()=>{}}function R(t,e){let n=this.spikes=new M(t,this),r=this.bird=new L(t,this);this.init=()=>{n.init(),r.init()},this.update=t=>{n.update(t),r.update(t)},this.render=()=>{t.clear(),r.render(),n.render()}}function O(t,e){const n=new g(t),o=new r(n);i(o.data),a(o.data);const s=new R(new v(n),o);return s.init(),new w(t=>{t=Math.min(t,18),o.update(t),s.update(t),s.render()},60).start(),{}}n.d(e,"app",function(){return O})}]);